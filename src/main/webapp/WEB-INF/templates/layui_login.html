
<!DOCTYPE html>

<html lang="en" xmlns:th="http://www.thymeleaf.org">

    <head>

        <meta charset="utf-8"/>

        <link rel="stylesheet" href="layui/css/layui.css"/>
		<script src="js/jquery-1.3.2.min.js"></script>

        <style type="text/css">

      		.container{

      			width: 420px;

      			height: 320px;

		 		 min-height: 320px;  

		 		 max-height: 320px;  

		 		 position: absolute;   

		 		 top: 0;  

		 		 left: 0;  

		 		 bottom: 0;  

		 		 right: 0;  

		 		 margin: auto;  

		 		 padding: 20px;  

		 		 z-index: 130;  

		 		 border-radius: 8px;  

		 		 background-color: #fff;  

		 		 box-shadow: 0 3px 18px rgba(100, 0, 0, .5); 

		 		 font-size: 16px;

      		}

      		.close{

      			background-color: white;

      			border: none;

      			font-size: 18px;

      			margin-left: 410px;

      			margin-top: -10px;

      		}

 

        	.layui-input{

        		border-radius: 5px;

        		width: 300px;

        		height: 40px;

        		font-size: 15px;

        	}

        	.layui-form-item{

        		margin-left: -20px;

        	}

			#logoid{ 

				margin-top: -16px;

		 		 padding-left:150px; 

		 		 padding-bottom: 15px;

			}

			.layui-btn{

				margin-left: -50px;

				border-radius: 5px;

        		width: 350px;

        		height: 40px;

        		font-size: 15px;

			}

			.verity{

				width: 120px;

			}

			.font-set{

				font-size: 13px;

				text-decoration: none; 

				margin-left: 120px;

			}

			a:hover{

			 text-decoration: underline; 

			}
			body{
			  position:fixed;
			                top: 0;
			                left: 0;
			                width:100%;
			                height:100%;
			                min-width: 1000px;
			                z-index:-10;
			                zoom: 1;
			                background-color: #fff;
			                background: url(/img/wall.jpg);
			                background-repeat: no-repeat;
			                background-size: cover;
			                -webkit-background-size: cover;
			                -o-background-size: cover;
			                background-position: center 0;
			}

 
        </style>

    </head>

    <body background="img/wall.jpg"     >

    	<form class="layui-form" action="" method="post">

    		<div class="container">

    			<button class="close" title="关闭">X</button>

    			<div class=" layui-word-aux" style="text-align: center">
                 	<h1 style="text-align: center" id="label">登录</h1>
    			</div>
				<br/>

				<input type="hidden" th:value="${token}" class="token" name="token"/>

			  <div class="layui-form-item">

			    <label class="layui-form-label">手机号</label>

			    <div class="layui-input-block">

			      <input type="text" id="phone" required="required"  lay-verify="required" placeholder="请输入用户名" autocomplete="off" class="layui-input"/>

			    </div>

			  </div>

			  <div class="layui-form-item">

			    <label class="layui-form-label">密 &nbsp;&nbsp;码</label>

			    <div class="layui-input-inline">

			      <input type="password" id="password" required="required" lay-verify="required" placeholder="请输入密码" autocomplete="off" class="layui-input"/>

			    </div>

			    <!-- <div class="layui-form-mid layui-word-aux">辅助文字</div> -->

			  </div>

			   <div class="layui-form-item">

			    <label class="layui-form-label">验证码</label>

			    <div class="layui-input-inline">

			      <input type="text" id="verifycode" required="required"  lay-verify="required" placeholder="123456" autocomplete="off" class="layui-input verity"/>

			    </div>

			    <!-- <div class="layui-form-mid layui-word-aux">辅助文字</div> -->

			      

			  </div>

<!-- 			  <div class="layui-form-item">

				    <label class="layui-form-label">记住密码</label>

				    <div class="layui-input-block">

				      <input type="checkbox" name="close" lay-skin="switch" lay-text="ON|OFF">

				    </div>

			  </div> -->

 

			  <div class="layui-form-item">

			    <div class="layui-input-block">

			      <button class="layui-btn" lay-submit="lay-submit" lay-filter="forLogin">登陆</button>

			    </div>

			  </div>

			   <a href="" class="font-set">忘记密码?</a>  <a href="/layui_register.do" class="font-set">立即注册</a>

			</div>

		</form>

		<script type="text/javascript" src="layui/layui.js"></script>

		<script>

			layui.use(['form', 'layedit', 'laydate'], function(){

			  var form = layui.form

			  ,layer = layui.layer

			  ,layedit = layui.layedit

			  ,laydate = layui.laydate;

			  

			  //日期

			 /* laydate.render({

			    elem: '#date'

			  });

			  laydate.render({

			    elem: '#date1'

			  });

			  

			  //创建一个编辑器

			  var editIndex = layedit.build('LAY_demo_editor');

			 

			  //自定义验证规则

			  form.verify({

			    title: function(value){

			      if(value.length &it; 5){

			        return '标题至少得5个字符啊';

			      }

			    }

			    ,pass: [

			      /^[\S]{6,12}$/

			      ,'密码必须6到12位，且不能出现空格'

			    ]

			    ,content: function(value){

			      layedit.sync(editIndex);

			    }

			  });

			  

			  //监听指定开关

			  form.on('switch(switchTest)', function(data){

			    layer.msg('开关checked：'+ (this.checked ? 'true' : 'false'), {

			      offset: '6px'

			    });

			    layer.tips('温馨提示：请注意开关状态的文字可以随意定义，而不仅仅是ON|OFF', data.othis)

			  });*/

			  

			  //监听提交

			  form.on('submit(forLogin)', function(data){



				  var login_name = $('#phone').val();
				  var login_password = $('#password').val();
				  var login_token = $('.token').val();
				  $.ajax({
					      url: "/Login2Index.do",
					      type: "POST",
					      dataType: "JSON",
					      data: {phone: login_name, password: login_password, token: login_token},
					      success: function (data) {


					          var result = data.result;
							  if (result===0){
								  alert(data.msg);
								  window.location.href = '/layui_login.do';
							  }
							  if(result===1){
								  window.location.href = '/';
							  }

					      },
					  error: function (XMLHttpRequest, textStatus, errorThrown,data) {

						  console.log(errorThrown);
					  }
				  });

			    return false;

			  });

			 

			  //表单初始赋值

			 /* form.val('example', {

			    "username": "贤心" // "name": "value"

			    ,"password": "123456"

			    ,"interest": 1

			    ,"like[write]": true //复选框选中状态

			    ,"close": true //开关状态

			    ,"sex": "女"

			    ,"desc": "我爱 layui"

			  })*/

			  

			  

			});

			</script>

    </body>

</html>
